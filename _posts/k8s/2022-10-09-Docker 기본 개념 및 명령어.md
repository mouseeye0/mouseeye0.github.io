---
title: 01. Docker 기본 개념 및 명령어
author: mouseeye
date: 2022-10-09 21:00:00 +0900
categories: [Docker]
tags: [기본 개념]
---

## 기본 개념
### 도커 이미지
- 컨테이너를 생성할 때 필요한 요소
- 여러 개의 계층으로 된 바이너리 파일
- 이미지 이름 : [저장소 이름]/[이미지 이름]:[태그] (태그를 생략하면 `latest`로 사용)
  - object_engineering/image_name:latest

### 도커 컨테이너
- 이미지로 생성된 격리된 환경, 독립된 파일 시스템, 네트웤을 가짐

## 도커 명령어
### 도커 이미지/컨테이너 라이프 사이클

### 컨테이너 명령어
- 생성
  - docker run [option] image_name
  - Interaction mode로 실행
    - `docker run -i -t --name mycentos centos:7`
  - Background mode로 실행
    - `docker run -d --name mycentos centos:7`
- 목록 확인
  - `docker ps`
- 삭제
  - docker rm
  - `docker rm mycentos`
- docker 나오는 명령어
  - ctrl + D or exit : 컨테이너에서 나오면서 종료 시킴
  - ctl + P, Q : 컨테이너를 정지 하지 않고 빠져 나옴
- 컨테이너 외부에 노출
  - docker run -p [호스트의 포트]:[컨테이너의 포트]
  - `docker run -i -t --name test_contatiner -p 80:80 ubuntu:14.04`
  - 컨테이너가 생성되면 `172.17.0.x` 로 시작하는 가상 IP 주소를 할당 받는다.
    - 컨테이너 생성 후 `ifconfig`로 확인 가능
  - 호스트의 PORT와 컨테이너의 PORT를 바인딩 해야지만, 외부에서 접근 할 수 있다.
- 컨테이너 접속
  - docker exec -i -t test_name /bin/bash
- 컨테이너간 연결 (deprecated 될 스펙)
  - docker run -d --name test --link [연결할 컨테이너 이름]:[컨테이너 내부에서 사용할 host명] wordpress
    - `docker run -d -e MYSQL_DB_PASSWORD=password --name wordpress_test --link mysql_test_db:mysql wordpress`
    - -link 실행할 컨테이너에서 접속할 다른 컨테이너 별칭 설정 : 위 예시 기준으로 mysql_test_db라는 컨테이너를 mysql이라는 별칭으로 내부에서 접근
    - -e 환경변수 세팅
  - docker 브리지 네트워크를 통해서 대체됨!!!!
- 호스트 볼륨 공유
  - docker run -d --name host_volume_share -v [호스트의 볼륨 위치]:[컨테이너의 볼륨 위치] mysql:latest
  - `docker run -d -e MYSQL_ROOT_PASSWORD=password -e MYSQL_DATABASE=wordpress -v /home/wordpress_db:/var/lib/mysql mysql:latest`
  - 도커 이미지로 띄운 컨테이너가 종료되면 컨테이너에 생성된 데이터도 사라진다. 휘발성이 아닌 영구적으로 보관하기 위해 볼륨을 사용한다.
- 도커 볼륨 생성
  - `docker volume create` --name myvolume
  - `docker run -d --name mysql_with_volume -v myvolume:/root mysql:latest`

### Docker 이미지 관리 명령어
- 도커 이미지 검색
  - docker search [저장소 이름]/[이미지 이름]
  - docker search docker.io/ubuntu
- 도커 이미지 생성
  -

